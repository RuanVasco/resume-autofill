<div class="popup-container">
    <mat-card class="main-card">
        <mat-card-header>
            <mat-card-title>Resume AutoFill</mat-card-title>
            <mat-card-subtitle>Configure seu currículo</mat-card-subtitle>
        </mat-card-header>

        <mat-card-content>
            @if (fileName) {
            <div class="status-area">
                <mat-icon color="primary">description</mat-icon>
                <span class="filename">{{ fileName }}</span>
            </div>
            } @else {
            <div class="empty-state">
                <p>Nenhum currículo carregado.</p>
            </div>
            }

            @if (isLoading) {
            <mat-progress-bar mode="indeterminate"></mat-progress-bar>
            }

            <input #fileInput type="file" (change)="onFileSelected($event)" accept=".pdf" style="display: none;">

            <div class="debug-box" *ngIf="storedTextPreview">
                <small><strong>Preview do Storage:</strong></small>
                <p>{{ storedTextPreview }}</p>
            </div>
        </mat-card-content>

        <mat-card-actions align="end">
            <button mat-flat-button color="primary" (click)="fileInput.click()" [disabled]="isLoading">
                <mat-icon>upload_file</mat-icon>
                {{ fileName ? 'Trocar PDF' : 'Carregar PDF' }}
            </button>
        </mat-card-actions>
    </mat-card>
</div>
